schema: draft-07
name: postgres
description: "Example PostgreSQL bundle (edit in ./bundles)"
source_url: https://github.com/massdriver-cloud/demos
version: 0.0.0

params:
  required:
    - db_version
    - database_name
  properties:
    db_version:
      type: string
      title: PostgreSQL Version
      description: PostgreSQL version to deploy
      default: "16"
      $md.immutable: true
      enum:
        - "12"
        - "13"
        - "14"
        - "15"
        - "16"
    database_name:
      type: string
      title: Database Name
      description: Name of the database to create
      default: "mydb"
      pattern: ^[a-z][a-z0-9_]*$

connections:
  required:
    - network
  properties:
    network:
      $ref: network
      title: Network

artifacts:
  required:
    - database
  properties:
    database:
      $ref: postgres
      title: PostgreSQL Database

steps:
  - path: src
    provisioner: opentofu:1.10

ui:
  ui:order:
    - db_version
    - database_name
    - "*"
