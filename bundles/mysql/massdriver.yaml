schema: draft-07
name: mysql
description: "Example MySQL bundle (edit in ./bundles/mysql/massdriver.yaml)"
source_url: https://github.com/YOUR_ORG/massdriver-catalog/tree/main/bundles/mysql
version: 0.0.0

params:
  required:
    - db_version
    - database_name
    - username
  properties:
    db_version:
      type: string
      title: MySQL Version
      description: MySQL version to deploy
      default: "8.0"
      $md.immutable: true
      enum:
        - "5.7"
        - "8.0"
        - "8.1"
        - "8.4"
    database_name:
      type: string
      title: Database Name
      description: Name of the database to create
      default: "mydb"
      pattern: ^[a-z][a-z0-9_]*$
    username:
      type: string
      title: Database Username
      description: Username for database access
      default: "admin"
      pattern: ^[a-z][a-z0-9_]*$

connections:
  required:
    - network
  properties:
    network:
      $ref: network
      title: Network

artifacts:
  required:
    - database
  properties:
    database:
      $ref: mysql
      title: MySQL Database

steps:
  - path: src
    provisioner: opentofu:1.10

ui:
  ui:order:
    - db_version
    - database_name
    - username
    - "*"
